<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The Audio API</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
</head>
<body>
<button>Play</button>
<script type="text/javascript">
// Create Annonomuos Self Executing Function
  
  var context = new AudioContext(); // Create and Initialize the Audio Context
  var electro; // Create the Sound 
  var getSound = new XMLHttpRequest();
   // Load the Sound with XMLHttpRequest
  getSound.open("GET", "a.mp3", true); // Path to Audio File
  getSound.responseType = "arraybuffer"; // Read as Binary Data
  getSound.onload = function() {
    context.decodeAudioData(getSound.response, function(buffer){
      electro = buffer; // Decode the Audio Data and Store it in a Variable
    });
  }
  getSound.send(); // Send the Request and Load the File
  try {
      var playSound = context.createBufferSource(); // Declare a New Sound
      playSound.buffer = electro; // Attatch our Audio Data as it's Buffer
      playSound.connect(context.destination);  // Link the Sound to the Output
      playSound.start(0); // Play the Sound Immediately
  }
  catch(err) {
    setTimeout(function() {
      var playSound = context.createBufferSource(); // Declare a New Sound
      playSound.buffer = electro; // Attatch our Audio Data as it's Buffer
      playSound.connect(context.destination);  // Link the Sound to the Output
      playSound.start(0); // Play the Sound Immediately
    },3000);
  }


  // window.addEventListener("keydown",onKeyDown); // Create Event Listener for KeyDown
  
  // function onKeyDown(e){
  //   switch (e.keyCode) {
  //     // X
  //     case 88:
  //       var playSound = context.createBufferSource(); // Declare a New Sound
  //       playSound.buffer = electro; // Attatch our Audio Data as it's Buffer
  //       playSound.connect(context.destination);  // Link the Sound to the Output
  //       playSound.start(0); // Play the Sound Immediately
  //     break;
  //   }
  // }

    // getSound.onreadystatechange = function() {

    // };

// self.soundPlay = (
//         function () {
//             console.log(">>>>>>>>>>>>>>>Playsound");
//             debugger;
//             var audio_select = document.createElement('audio'),
//                 source1 = document.createElement('source'),
//                 source2 = document.createElement('source');
//             JAPPIX_STATIC = '/mini/';
//             if (loadFromZimbra) {
//                 JAPPIX_STATIC = "/service/proxy?target=" + AjxStringUtil.urlComponentEncode(ProsURL +"/mini");
//             }
//             audio_select.setAttribute('id','jm_audio');
//             source1.setAttribute('src', JAPPIX_STATIC + '/sounds/receive-message.mp3');
//             source1.setAttribute('type','audio/mpeg');
//             source2.setAttribute('src', JAPPIX_STATIC + '/sounds/receive-message.oga');
//             source2.setAttribute('type','audio/ogg');
//             audio_select.appendChild(source1);
//             audio_select.appendChild(source2);

//             //document.getElementById('jappix_mini').appendChild(audio_select);
//             return function () {
//                 if (!JappixCommon.exists('#jappix_mini #jm_audio')) {
//                     document.getElementById('jappix_mini').appendChild(audio_select);
//                 }
//                 // try {
//                 // Not supported!
//                 if ((BrowserDetect.browser == 'Explorer') && (BrowserDetect.version < 9)) {
//                     return false;
//                 }
//                 console.log(">>>>>>>>>>>>",audio_select.paused);
//                 if (!audio_select.paused) {
//                     setTimeout(function () {
//                         audio_select.pause();
//                         audio_select.load();
//                         console.log("SAU KHI PAUSE>>>>>>>>>>>>",audio_select.paused);
//                         audio_select.play();
//                         console.log("SAU KHI PLAY>>>>>>>>>>>>",audio_select.paused);
//                     }, 1000);
//                 }
//                 else{
//                     //audio_select.load();
//                     audio_select.play();
//                     console.log("PLAY binh thuong>>>>>>>>>>>>",audio_select.paused);
//                 }
//             }
//         }
//     )();
</script>
</body>
</html>